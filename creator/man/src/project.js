require=function t(e,c,i){function n(r,s){if(!c[r]){if(!e[r]){var a="function"==typeof require&&require;if(!s&&a)return a(r,!0);if(o)return o(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var h=c[r]={exports:{}};e[r][0].call(h.exports,function(t){var c=e[r][1][t];return n(c||t)},h,h.exports,t,e,c,i)}return c[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({gameUI:[function(t,e,c){"use strict";cc._RF.push(e,"c015dRxIBFKAociVbgviNL0","gameUI"),cc.Class({extends:cc.Component,properties:{hero_img:{default:null,type:cc.Node},rect_old_img:{default:null,type:cc.Node},rect_new_img:{default:null,type:cc.Node},double_rect_img:{default:null,type:cc.Node},stick_pre:{default:null,type:cc.Prefab},score_label:{default:null,type:cc.Label}},onLoad:function(){this.bg=this.node.getChildByName("bg"),this.score=0,this.initWidth=.2*cc.winSize.width,this.initHeight=250},start:function(){this.initGame()},initGame:function(){this.createRect(),this.touchFunc()},touchFunc:function(){var t=this,e=t.hero_img.getBoundingBox().width;this.node.once(cc.Node.EventType.TOUCH_START,function(e){t.getNewStick(),t.newStick.runAction(cc.scaleBy(.2,1,1.5).repeatForever())},this),this.node.once(cc.Node.EventType.TOUCH_END,function(c){t.newStick.stopAllActions(),t.newStick.runAction(cc.sequence(cc.rotateTo(.5,90),cc.callFunc(function(){var c=t.hero_img.getChildByName("run_ani").getComponent(cc.Animation);c.play();var i=t.newStick.getBoundingBox().width;t.hero_img.runAction(cc.sequence(cc.moveBy(.5,i+e/2+5,0),cc.callFunc(function(){c.stop();var e=t.newStick.getBoundingBox().width,i=t.newStick.parent.convertToWorldSpaceAR(cc.v2(e+t.newStick.x,0)),n=t.rect_new_img.getBoundingBoxToWorld(),o=t.double_rect_img.getBoundingBoxToWorld();i.x>=n.xMin&&i.x<=n.xMax?(i.x>=o.xMin&&i.x<=o.xMax?t.addScore(2):t.addScore(1),t.moveSucc()):(t.newStick.destroy(),t.hero_img.runAction(cc.sequence(cc.moveTo(.5,cc.p(t.hero_img.x,0)),cc.callFunc(function(){cc.sys.localStorage.setItem("CUR_SCORE",t.score),cc.director.loadScene("Start")}))))})))})))},this)},randomXY:function(t){for(var e=0,c=0;t+1e3*(e+c)/100>cc.winSize.width||c<8||0===e&&0===c;)this.score=this.score>=50?50:this.score,e=Math.random()*(100-this.score)+this.score,c=Math.abs(100*Math.random()-this.score);return{dis:10*e+t,len:10*c}},createRect:function(){var t=this.randomXY(this.rect_old_img.x+this.rect_old_img.getBoundingBox().width/2);this.rect_new_img.width=t.len,this.rect_new_img.setPositionX(t.dis+t.len/2),this.bg.getChildByName("double_img")||this.bg.addChild(this.double_rect_img),this.double_rect_img.setPositionX(t.dis+t.len/2)},moveSucc:function(){var t=this;this.newStick.destroy(),this.double_rect_img.removeFromParent(),this.rect_old_img.runAction(cc.moveTo(.5,cc.p(-cc.winSize.width/2,0))),this.hero_img.runAction(cc.moveTo(.5,cc.p(t.initWidth,t.initHeight))),this.rect_new_img.runAction(cc.sequence(cc.moveTo(.5,cc.p(t.initWidth,0)),cc.callFunc(function(){t.rect_old_img.width=t.rect_new_img.width,t.rect_old_img.runAction(cc.sequence(cc.moveTo(.01,cc.p(t.initWidth,0)),cc.callFunc(function(){t.initGame()})))})))},addScore:function(t){t<=0||t>2||(this.score+=t,this.score_label.string=this.score.toString())},getNewStick:function(){var t=this.hero_img.getBoundingBox().width;this.newStick=cc.instantiate(this.stick_pre),this.bg.addChild(this.newStick),this.newStick.setPositionX(this.rect_old_img.x+t/2+5)}}),cc._RF.pop()},{}],startUI:[function(t,e,c){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","startUI"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.bg=this.node.getChildByName("bg"),this.max_score_label=this.bg.getChildByName("max_score_label").getComponent(cc.Label),this.cur_score_label=this.bg.getChildByName("cur_score_label").getComponent(cc.Label);var t=cc.sys.localStorage.getItem("MAX_SCORE"),e=cc.sys.localStorage.getItem("CUR_SCORE");t||(t=0),e||(e=0),e>t&&(t=e,cc.sys.localStorage.setItem("MAX_SCORE",t)),this.max_score_label.string="最高分："+t.toString(),this.cur_score_label.string=e.toString()},playGame:function(){cc.director.loadScene("PlayGame")}}),cc._RF.pop()},{}]},{},["gameUI","startUI"]);